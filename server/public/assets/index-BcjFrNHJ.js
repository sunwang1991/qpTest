import{M as C,d as F,r as p,W as K,c as R,o as b,f as e,K as h,w as n,E as U,n as N,k as o,q as Q,p as y,L as z,i as x,h as E,t as V,X as J,J as L}from"./index-G7k4jObO.js";/* empty css                   */import{_ as M}from"./index-lnQ7o6NH.js";import{a as W,E as X}from"./el-table-column-DdgShedu.js";import"./el-checkbox-BDHvdtX6.js";import{E as j,a as A}from"./el-form-item-BuGiXd-d.js";import"./_baseClone-BzXbRH51.js";function G(m){return C({url:"/monitor/user-online/list",method:"get",params:m})}function H(m){return C({url:`/monitor/user-online/logout/${m}`,method:"delete"})}const O={class:"app-container"},re={__name:"index",setup(m){const{proxy:f}=F(),I=p([]),c=p(!0),g=p(0),r=p(1),s=p(10),u=p({loginIp:"",userName:""});function _(){c.value=!0,G(u.value).then(i=>{I.value=i.data.rows,g.value=i.data.total,c.value=!1})}function d(){r.value=1,_()}function P(){f.resetForm("queryRef"),d()}function T(i){f.$modal.confirm('是否确认强退名称为"'+i.userName+'"的用户?').then(function(){return H(i.tokenId)}).then(()=>{_(),f.$modal.msgSuccess("删除成功")}).catch(()=>{})}return _(),(i,l)=>{const k=U,w=j,v=Q,B=A,a=W,S=X,$=M,q=K("hasPermi"),D=z;return b(),R("div",O,[e(B,{model:o(u),ref:"queryRef",inline:!0},{default:n(()=>[e(w,{label:"登录账号",prop:"userName"},{default:n(()=>[e(k,{modelValue:o(u).userName,"onUpdate:modelValue":l[0]||(l[0]=t=>o(u).userName=t),placeholder:"请输入登录账号",clearable:"",style:{width:"200px"},onKeyup:N(d,["enter"])},null,8,["modelValue"])]),_:1}),e(w,{label:"登录IP",prop:"loginIp"},{default:n(()=>[e(k,{modelValue:o(u).loginIp,"onUpdate:modelValue":l[1]||(l[1]=t=>o(u).loginIp=t),placeholder:"请输入登录IP",clearable:"",style:{width:"200px"},onKeyup:N(d,["enter"])},null,8,["modelValue"])]),_:1}),e(w,null,{default:n(()=>[e(v,{type:"primary",icon:"Search",onClick:d},{default:n(()=>l[4]||(l[4]=[y("搜索")])),_:1}),e(v,{icon:"Refresh",onClick:P},{default:n(()=>l[5]||(l[5]=[y("重置")])),_:1})]),_:1})]),_:1},8,["model"]),h((b(),x(S,{data:o(I).slice((o(r)-1)*o(s),o(r)*o(s)),style:{width:"100%"}},{default:n(()=>[e(a,{label:"序号",width:"50",type:"index",align:"left"},{default:n(t=>[E("span",null,V((o(r)-1)*o(s)+t.$index+1),1)]),_:1}),e(a,{label:"会话编号",align:"left",prop:"tokenId","show-overflow-tooltip":!0}),e(a,{label:"登录账号",align:"left",prop:"userName","show-overflow-tooltip":!0}),e(a,{label:"所属部门",align:"left",prop:"deptName","show-overflow-tooltip":!0}),e(a,{label:"登录IP",align:"left",prop:"loginIp","show-overflow-tooltip":!0}),e(a,{label:"登录地点",align:"left",prop:"loginLocation","show-overflow-tooltip":!0}),e(a,{label:"操作系统",align:"left",prop:"os","show-overflow-tooltip":!0}),e(a,{label:"浏览器",align:"left",prop:"browser","show-overflow-tooltip":!0}),e(a,{label:"登录时间",align:"left",prop:"loginTime",width:"180"},{default:n(t=>[E("span",null,V(i.parseTime(t.row.loginTime)),1)]),_:1}),e(a,{label:"操作",align:"left","class-name":"small-padding fixed-width"},{default:n(t=>[h((b(),x(v,{link:"",type:"primary",icon:"Delete",onClick:Y=>T(t.row)},{default:n(()=>l[6]||(l[6]=[y("强退")])),_:2},1032,["onClick"])),[[q,["monitor:online:forceLogout"]]])]),_:1})]),_:1},8,["data"])),[[D,o(c)]]),h(e($,{total:o(g),page:o(r),"onUpdate:page":l[2]||(l[2]=t=>L(r)?r.value=t:null),limit:o(s),"onUpdate:limit":l[3]||(l[3]=t=>L(s)?s.value=t:null)},null,8,["total","page","limit"]),[[J,o(g)>0]])])}}};export{re as default};
