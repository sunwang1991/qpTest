import{M as E,d as me,r as m,I as ce,V as fe,W as _e,c as C,o as s,K as v,f as t,X as M,k as n,w as o,E as ye,n as O,Q as ge,S as U,T as B,i as c,R as ve,q as be,p as d,J as W,L as we,h as X,t as j}from"./index-koRf1amC.js";/* empty css                   */import{E as Te}from"./el-dialog-BKcY_UO0.js";import{E as Ve,b as Ee}from"./el-radio-BeFAM8_7.js";import{_ as he}from"./index-CSO0AOC1.js";import{a as ke,E as Ce}from"./el-table-column-r1ysCLPE.js";import"./el-checkbox-HK0N5oFI.js";import{_ as Se}from"./index-C7JIz0oM.js";import{E as xe}from"./el-row-VKr6Yz4y.js";import{_ as Fe}from"./index-CWBHHNWa.js";import{E as Ie}from"./el-col-BsYUv868.js";import{E as Ne,a as Re}from"./el-form-item-BLvtEj0w.js";import"./_baseClone-VCTtEV7x.js";function Ue(r){return E({url:"/system/notice/list",method:"get",params:r})}function Be(r){return E({url:"/system/notice/"+r,method:"get"})}function De(r){return E({url:"/system/notice",method:"post",data:r})}function qe(r){return E({url:"/system/notice",method:"put",data:r})}function $e(r){return E({url:"/system/notice/"+r,method:"delete"})}const Pe={class:"app-container"},Le={class:"dialog-footer"},Ze={__name:"index",setup(r){const{proxy:f}=me(),{sys_notice_status:D,sys_notice_type:S}=f.useDict("sys_notice_status","sys_notice_type"),q=m([]),_=m(!1),x=m(!0),h=m(!0),F=m([]),$=m(!0),P=m(!0),I=m(0),N=m(""),H=ce({form:{},queryParams:{pageNum:1,pageSize:20,noticeTitle:"",createBy:"",statusFlag:void 0},rules:{noticeTitle:[{required:!0,message:"公告标题不能为空",trigger:"blur"}],noticeType:[{required:!0,message:"公告类型不能为空",trigger:"change"}]}}),{queryParams:u,form:a,rules:Y}=fe(H);function b(){x.value=!0,Ue(u.value).then(i=>{q.value=i.data.rows,I.value=i.data.total,x.value=!1})}function Z(){_.value=!1,R()}function R(){a.value={noticeId:void 0,noticeTitle:"",noticeType:"",noticeContent:"",statusFlag:"0"},f.resetForm("noticeRef")}function k(){u.value.pageNum=1,b()}function ee(){f.resetForm("queryRef"),k()}function te(i){F.value=i.map(e=>e.noticeId),$.value=i.length!=1,P.value=!i.length}function le(){R(),_.value=!0,N.value="添加公告"}function L(i){R();const e=i.noticeId||F.value;Be(e).then(T=>{a.value=T.data,_.value=!0,N.value="修改公告"})}function oe(){f.$refs.noticeRef.validate(i=>{i&&(a.value.noticeId?qe(a.value).then(e=>{f.$modal.msgSuccess("修改成功"),_.value=!1,b()}):De(a.value).then(e=>{f.$modal.msgSuccess("新增成功"),_.value=!1,b()}))})}function K(i){const e=i.noticeId||F.value;f.$modal.confirm('是否确认删除公告编号为"'+e+'"的数据项？').then(function(){return $e(e)}).then(()=>{b(),f.$modal.msgSuccess("删除成功")}).catch(()=>{})}return b(),(i,e)=>{const T=ye,y=Ne,Q=ve,z=ge,p=be,A=Re,w=Ie,ne=Fe,G=xe,g=ke,J=Se,ae=Ce,ie=he,ue=Ee,se=Ve,re=Te,V=_e("hasPermi"),de=we;return s(),C("div",Pe,[v(t(A,{model:n(u),ref:"queryRef",inline:!0},{default:o(()=>[t(y,{label:"公告标题",prop:"noticeTitle"},{default:o(()=>[t(T,{modelValue:n(u).noticeTitle,"onUpdate:modelValue":e[0]||(e[0]=l=>n(u).noticeTitle=l),placeholder:"请输入公告标题",clearable:"",style:{width:"200px"},onKeyup:O(k,["enter"])},null,8,["modelValue"])]),_:1}),t(y,{label:"操作人员",prop:"createBy"},{default:o(()=>[t(T,{modelValue:n(u).createBy,"onUpdate:modelValue":e[1]||(e[1]=l=>n(u).createBy=l),placeholder:"请输入操作人员",clearable:"",style:{width:"200px"},onKeyup:O(k,["enter"])},null,8,["modelValue"])]),_:1}),t(y,{label:"类型",prop:"noticeType"},{default:o(()=>[t(z,{modelValue:n(u).noticeType,"onUpdate:modelValue":e[2]||(e[2]=l=>n(u).noticeType=l),placeholder:"公告类型",clearable:"",style:{width:"200px"}},{default:o(()=>[(s(!0),C(U,null,B(n(S),l=>(s(),c(Q,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(y,null,{default:o(()=>[t(p,{type:"primary",icon:"Search",onClick:k},{default:o(()=>e[11]||(e[11]=[d("搜索")])),_:1}),t(p,{icon:"Refresh",onClick:ee},{default:o(()=>e[12]||(e[12]=[d("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[M,n(h)]]),t(G,{gutter:10,class:"mb8"},{default:o(()=>[t(w,{span:1.5},{default:o(()=>[v((s(),c(p,{type:"primary",plain:"",icon:"Plus",onClick:le},{default:o(()=>e[13]||(e[13]=[d(" 新增 ")])),_:1})),[[V,["system:notice:add"]]])]),_:1}),t(w,{span:1.5},{default:o(()=>[v((s(),c(p,{type:"success",plain:"",icon:"Edit",disabled:n($),onClick:L},{default:o(()=>e[14]||(e[14]=[d(" 修改 ")])),_:1},8,["disabled"])),[[V,["system:notice:edit"]]])]),_:1}),t(w,{span:1.5},{default:o(()=>[v((s(),c(p,{type:"danger",plain:"",icon:"Delete",disabled:n(P),onClick:K},{default:o(()=>e[15]||(e[15]=[d(" 删除 ")])),_:1},8,["disabled"])),[[V,["system:notice:remove"]]])]),_:1}),t(ne,{showSearch:n(h),"onUpdate:showSearch":e[3]||(e[3]=l=>W(h)?h.value=l:null),onQueryTable:b},null,8,["showSearch"])]),_:1}),v((s(),c(ae,{data:n(q),onSelectionChange:te},{default:o(()=>[t(g,{type:"selection",width:"55",align:"left"}),t(g,{label:"序号",align:"left",prop:"noticeId",width:"100"}),t(g,{label:"公告标题",align:"left",prop:"noticeTitle","show-overflow-tooltip":!0}),t(g,{label:"公告类型",align:"left",prop:"noticeType",width:"100"},{default:o(l=>[t(J,{options:n(S),value:l.row.noticeType},null,8,["options","value"])]),_:1}),t(g,{label:"状态",align:"left",prop:"statusFlag",width:"100"},{default:o(l=>[t(J,{options:n(D),value:l.row.statusFlag},null,8,["options","value"])]),_:1}),t(g,{label:"创建者",align:"left",prop:"createBy",width:"100"}),t(g,{label:"创建时间",align:"left",prop:"createTime",width:"100"},{default:o(l=>[X("span",null,j(i.parseTime(l.row.createTime,"{y}-{m}-{d}")),1)]),_:1}),t(g,{label:"操作",align:"left","class-name":"small-padding fixed-width"},{default:o(l=>[v((s(),c(p,{link:"",type:"primary",icon:"Edit",onClick:pe=>L(l.row)},{default:o(()=>e[16]||(e[16]=[d(" 修改 ")])),_:2},1032,["onClick"])),[[V,["system:notice:edit"]]]),v((s(),c(p,{link:"",type:"primary",icon:"Delete",onClick:pe=>K(l.row)},{default:o(()=>e[17]||(e[17]=[d(" 删除 ")])),_:2},1032,["onClick"])),[[V,["system:notice:remove"]]])]),_:1})]),_:1},8,["data"])),[[de,n(x)]]),v(t(ie,{total:n(I),page:n(u).pageNum,"onUpdate:page":e[4]||(e[4]=l=>n(u).pageNum=l),limit:n(u).pageSize,"onUpdate:limit":e[5]||(e[5]=l=>n(u).pageSize=l),onPagination:b},null,8,["total","page","limit"]),[[M,n(I)>0]]),t(re,{title:n(N),modelValue:n(_),"onUpdate:modelValue":e[10]||(e[10]=l=>W(_)?_.value=l:null),width:"780px","append-to-body":""},{footer:o(()=>[X("div",Le,[t(p,{type:"primary",onClick:oe},{default:o(()=>e[18]||(e[18]=[d("确 定")])),_:1}),t(p,{onClick:Z},{default:o(()=>e[19]||(e[19]=[d("取 消")])),_:1})])]),default:o(()=>[t(A,{ref:"noticeRef",model:n(a),rules:n(Y),"label-width":"80px"},{default:o(()=>[t(G,null,{default:o(()=>[t(w,{span:12},{default:o(()=>[t(y,{label:"公告标题",prop:"noticeTitle"},{default:o(()=>[t(T,{modelValue:n(a).noticeTitle,"onUpdate:modelValue":e[6]||(e[6]=l=>n(a).noticeTitle=l),placeholder:"请输入公告标题"},null,8,["modelValue"])]),_:1})]),_:1}),t(w,{span:12},{default:o(()=>[t(y,{label:"公告类型",prop:"noticeType"},{default:o(()=>[t(z,{modelValue:n(a).noticeType,"onUpdate:modelValue":e[7]||(e[7]=l=>n(a).noticeType=l),placeholder:"请选择"},{default:o(()=>[(s(!0),C(U,null,B(n(S),l=>(s(),c(Q,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(w,{span:24},{default:o(()=>[t(y,{label:"状态"},{default:o(()=>[t(se,{modelValue:n(a).statusFlag,"onUpdate:modelValue":e[8]||(e[8]=l=>n(a).statusFlag=l)},{default:o(()=>[(s(!0),C(U,null,B(n(D),l=>(s(),c(ue,{key:l.value,value:l.value},{default:o(()=>[d(j(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(w,{span:24},{default:o(()=>[t(y,{label:"内容"},{default:o(()=>[t(T,{rows:6,type:"textarea",placeholder:"请输入内容",modelValue:n(a).noticeContent,"onUpdate:modelValue":e[9]||(e[9]=l=>n(a).noticeContent=l)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}};export{Ze as default};
