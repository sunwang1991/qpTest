import{_ as q,y as B,a as P,d as R,r as g,e as U,c as v,o as f,f as s,h as i,w as r,i as z,j as N,t as I,k as o,E as T,m as K,n as y,q as M,s as A,p as F,v as S,z as $,A as j,B as D,C as H}from"./index-koRf1amC.js";import{E as L,a as W}from"./el-form-item-BLvtEj0w.js";import"./_baseClone-VCTtEV7x.js";const G={class:"register"},J={class:"title"},O={class:"register-code"},Q=["src"],X={key:0},Y={key:1},Z={style:{float:"right"}},ee={__name:"register",setup(se){const h=B(),x=P(),{proxy:V}=R(),t=g({username:"",password:"",confirmPassword:"",code:"",uuid:""}),k={username:[{required:!0,trigger:"blur",message:"请输入您的账号"},{pattern:H,message:"账号只能包含大写小写字母，数字，且不少于4位",trigger:"blur"}],password:[{required:!0,trigger:"blur",message:"请输入您的密码"},{pattern:D,message:"密码至少包含大小写字母、数字、特殊符号，且不少于6位",trigger:"blur"}],confirmPassword:[{required:!0,trigger:"blur",message:"请再次输入您的密码"},{required:!0,validator:(l,e,a)=>{t.value.password!==e?a(new Error("两次输入的密码不一致")):a()},trigger:"blur"}],code:[{required:!0,trigger:"change",message:"请输入验证码"}]},_=g(""),u=g(!1),p=g(!1);function c(){V.$refs.registerRef.validate(l=>{l&&(u.value=!0,$(t.value).then(e=>{const a=t.value.username;j.alert("<font color='#67c23a'>恭喜你，您的账号 "+a+" 注册成功！</font>","系统提示",{dangerouslyUseHTMLString:!0,type:"success"}).then(()=>{x.push("/login")}).catch(()=>{})}).finally(()=>{u.value=!1,p&&w()}))})}function w(){S().then(l=>{var e;if(p.value=!!l.data.enabled,p.value){const a=l.data.img;a.startsWith("data:image")?_.value=a:_.value="data:image/gif;base64,"+a,t.value.uuid=l.data.uuid,(e=l.data)!=null&&e.text&&(t.value.code=l.data.text)}})}return w(),(l,e)=>{const a=K,m=T,d=L,E=M,C=U("router-link"),b=W;return f(),v("div",G,[s(b,{ref:"registerRef",model:o(t),rules:k,class:"register-form"},{default:r(()=>[i("h3",J,I(o(h).appName),1),s(d,{prop:"username"},{default:r(()=>[s(m,{modelValue:o(t).username,"onUpdate:modelValue":e[0]||(e[0]=n=>o(t).username=n),type:"text",size:"large","auto-complete":"off",placeholder:"账号"},{prefix:r(()=>[s(a,{"icon-class":"user",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),s(d,{prop:"password"},{default:r(()=>[s(m,{modelValue:o(t).password,"onUpdate:modelValue":e[1]||(e[1]=n=>o(t).password=n),type:"password",size:"large","auto-complete":"off",placeholder:"密码",onKeyup:y(c,["enter"])},{prefix:r(()=>[s(a,{"icon-class":"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),s(d,{prop:"confirmPassword"},{default:r(()=>[s(m,{modelValue:o(t).confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=n=>o(t).confirmPassword=n),type:"password",size:"large","auto-complete":"off",placeholder:"确认密码",onKeyup:y(c,["enter"])},{prefix:r(()=>[s(a,{"icon-class":"password",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"])]),_:1}),o(p)?(f(),z(d,{key:0,prop:"code"},{default:r(()=>[s(m,{size:"large",modelValue:o(t).code,"onUpdate:modelValue":e[3]||(e[3]=n=>o(t).code=n),"auto-complete":"off",placeholder:"验证码",style:{width:"63%"},onKeyup:y(c,["enter"])},{prefix:r(()=>[s(a,{"icon-class":"validCode",class:"el-input__icon input-icon"})]),_:1},8,["modelValue"]),i("div",O,[i("img",{src:o(_),onClick:w,class:"register-code-img"},null,8,Q)])]),_:1})):N("",!0),s(d,{style:{width:"100%"}},{default:r(()=>[s(E,{loading:o(u),size:"large",type:"primary",style:{width:"100%"},onClick:A(c,["prevent"])},{default:r(()=>[o(u)?(f(),v("span",Y,"注 册 中...")):(f(),v("span",X,"注 册"))]),_:1},8,["loading"]),i("div",Z,[s(C,{class:"link-type",to:"/login"},{default:r(()=>e[4]||(e[4]=[F(" 使用已有账户登录 ")])),_:1})])]),_:1})]),_:1},8,["model"]),e[5]||(e[5]=i("div",{class:"el-register-footer"},[i("span",null,"Copyright © 2023 TsMask All Rights Reserved.")],-1))])}}},le=q(ee,[["__scopeId","data-v-f34bd316"]]);export{le as default};
