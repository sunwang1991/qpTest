import{d as A,r as f,I as J,i as E,o as w,w as a,f as l,k as o,E as O,n as I,Q as X,c as j,S as G,T as H,R as M,q as W,p as _,K as Y,h as S,t as Z,X as ee,J as le}from"./index-koRf1amC.js";import{E as te}from"./el-dialog-BKcY_UO0.js";import{E as oe}from"./el-row-VKr6Yz4y.js";import{_ as ae}from"./index-CSO0AOC1.js";import{E as ne,a as se}from"./el-table-column-r1ysCLPE.js";import"./el-checkbox-HK0N5oFI.js";import{_ as re}from"./index-C7JIz0oM.js";import{a as ue,E as pe}from"./el-form-item-BLvtEj0w.js";import{u as ie,d as me}from"./role-BOsbMu0C.js";import"./_baseClone-VCTtEV7x.js";const de={class:"dialog-footer"},Ie={__name:"auth-user-select",props:{roleId:{type:[Number,String]}},emits:["ok"],setup(V,{expose:k,emit:N}){const x=V,{proxy:p}=A(),{sys_normal_disable:v}=p.useDict("sys_normal_disable"),y=f([]),r=f(!1),c=f(0),g=f([]),n=J({pageNum:1,pageSize:20,auth:!1,roleId:void 0,userName:"",phone:"",statusFlag:void 0});function C(){n.roleId=x.roleId,b(),r.value=!0}function F(s){p.$refs.refTable.toggleRowSelection(s)}function R(s){g.value=s.map(e=>e.userId)}function b(){ie(n).then(s=>{y.value=s.data.rows,c.value=s.data.total})}function i(){n.pageNum=1,b()}function T(){p.resetForm("queryRef"),i()}const U=N;function B(){const s=n.roleId;if(g.value.length===0){p.$modal.msgError("请选择要分配的用户");return}me({auth:!0,roleId:parseInt(s),userIds:g.value.map(e=>parseInt(e))}).then(e=>{p.$modal.msgSuccess(e.msg),r.value=!1,U("ok")})}return k({show:C}),(s,e)=>{const h=O,m=pe,q=M,D=X,d=W,K=ue,u=se,L=re,$=ne,z=ae,Q=oe,P=te;return w(),E(P,{title:"选择用户",modelValue:o(r),"onUpdate:modelValue":e[6]||(e[6]=t=>le(r)?r.value=t:null),width:"800px",top:"5vh","append-to-body":""},{footer:a(()=>[S("div",de,[l(d,{type:"primary",onClick:B},{default:a(()=>e[9]||(e[9]=[_("确 定")])),_:1}),l(d,{onClick:e[5]||(e[5]=t=>r.value=!1)},{default:a(()=>e[10]||(e[10]=[_("取 消")])),_:1})])]),default:a(()=>[l(K,{model:o(n),ref:"queryRef",inline:!0},{default:a(()=>[l(m,{label:"登录账号",prop:"userName"},{default:a(()=>[l(h,{modelValue:o(n).userName,"onUpdate:modelValue":e[0]||(e[0]=t=>o(n).userName=t),placeholder:"请输入登录账号",clearable:"",style:{width:"200px"},onKeyup:I(i,["enter"])},null,8,["modelValue"])]),_:1}),l(m,{label:"手机号码",prop:"phone"},{default:a(()=>[l(h,{modelValue:o(n).phone,"onUpdate:modelValue":e[1]||(e[1]=t=>o(n).phone=t),placeholder:"请输入手机号码",clearable:"",style:{width:"200px"},onKeyup:I(i,["enter"])},null,8,["modelValue"])]),_:1}),l(m,{label:"用户状态",prop:"statusFlag"},{default:a(()=>[l(D,{modelValue:o(n).statusFlag,"onUpdate:modelValue":e[2]||(e[2]=t=>o(n).statusFlag=t),placeholder:"用户状态",clearable:"",style:{width:"200px"}},{default:a(()=>[(w(!0),j(G,null,H(o(v),t=>(w(),E(q,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,null,{default:a(()=>[l(d,{type:"primary",icon:"Search",onClick:i},{default:a(()=>e[7]||(e[7]=[_("搜索")])),_:1}),l(d,{icon:"Refresh",onClick:T},{default:a(()=>e[8]||(e[8]=[_("重置")])),_:1})]),_:1})]),_:1},8,["model"]),l(Q,null,{default:a(()=>[l($,{onRowClick:F,ref:"refTable",data:o(y),onSelectionChange:R,height:"400px"},{default:a(()=>[l(u,{type:"selection",width:"55"}),l(u,{label:"登录账号",prop:"userName","show-overflow-tooltip":!0}),l(u,{label:"用户昵称",prop:"nickName","show-overflow-tooltip":!0}),l(u,{label:"手机",prop:"phone","show-overflow-tooltip":!0}),l(u,{label:"状态",align:"left",prop:"statusFlag"},{default:a(t=>[l(L,{options:o(v),value:t.row.statusFlag},null,8,["options","value"])]),_:1}),l(u,{label:"创建时间",align:"left",prop:"createTime",width:"180"},{default:a(t=>[S("span",null,Z(s.parseTime(t.row.createTime)),1)]),_:1})]),_:1},8,["data"]),Y(l(z,{total:o(c),page:o(n).pageNum,"onUpdate:page":e[3]||(e[3]=t=>o(n).pageNum=t),limit:o(n).pageSize,"onUpdate:limit":e[4]||(e[4]=t=>o(n).pageSize=t),onPagination:b},null,8,["total","page","limit"]),[[ee,o(c)>0]])]),_:1})]),_:1},8,["modelValue"])}}};export{Ie as default};
