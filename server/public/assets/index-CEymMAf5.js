import{M as C,d as fe,r as _,I as _e,V as ge,W as ce,c as R,o as r,K as g,f as t,X as L,k as o,w as a,E as ve,n as K,Q as ye,S as Q,T as z,i as c,R as be,q as Ve,p,J as A,L as we,h as G,t as J}from"./index-G7k4jObO.js";/* empty css                   */import{E as Ce}from"./el-dialog-DIYJXQiP.js";import{E as Ee,b as ke}from"./el-radio-D3_6fv-a.js";import{E as Se}from"./el-input-number-BiqDyfz5.js";import{_ as Ne}from"./index-lnQ7o6NH.js";import{a as xe,E as Fe}from"./el-table-column-DdgShedu.js";import"./el-checkbox-BDHvdtX6.js";import{_ as he}from"./index-MQ6fygIi.js";import{E as Ie}from"./el-row-ErebF3jE.js";import{_ as Ue}from"./index-1r1_z5ZC.js";import{E as Re}from"./el-col-B8uK4B1i.js";import{E as Pe,a as De}from"./el-form-item-BuGiXd-d.js";import"./index-BgiGdtQm.js";import"./_baseClone-BzXbRH51.js";function Te(d){return C({url:"/system/post/list",method:"get",params:d})}function qe(d){return C({url:"/system/post/"+d,method:"get"})}function $e(d){return C({url:"/system/post",method:"post",data:d})}function Be(d){return C({url:"/system/post",method:"put",data:d})}function Le(d){return C({url:"/system/post/"+d,method:"delete"})}const Ke={class:"app-container"},Qe={class:"dialog-footer"},ot={__name:"index",setup(d){const{proxy:m}=fe(),{sys_normal_disable:N}=m.useDict("sys_normal_disable"),P=_([]),v=_(!1),x=_(!0),E=_(!0),F=_([]),D=_(!0),T=_(!0),h=_(0),I=_(""),M=_e({form:{},queryParams:{pageNum:1,pageSize:20,postCode:"",postName:"",statusFlag:void 0},rules:{postName:[{required:!0,message:"岗位名称不能为空",trigger:"blur"}],postCode:[{required:!0,message:"岗位编码不能为空",trigger:"blur"}],postSort:[{required:!0,message:"岗位顺序不能为空",trigger:"blur"}]}}),{queryParams:n,form:s,rules:O}=ge(M);function b(){x.value=!0,Te(n.value).then(u=>{P.value=u.data.rows,h.value=u.data.total,x.value=!1})}function W(){v.value=!1,U()}function U(){s.value={postId:void 0,postCode:"",postName:"",postSort:0,statusFlag:"0",remark:""},m.resetForm("postRef")}function k(){n.value.pageNum=1,b()}function X(){m.resetForm("queryRef"),k()}function j(u){F.value=u.map(e=>e.postId),D.value=u.length!=1,T.value=!u.length}function H(){U(),v.value=!0,I.value="添加岗位"}function q(u){U();const e=u.postId||F.value;qe(e).then(V=>{s.value=V.data,v.value=!0,I.value="修改岗位"})}function Y(){m.$refs.postRef.validate(u=>{u&&(s.value.postId?Be(s.value).then(e=>{m.$modal.msgSuccess("修改成功"),v.value=!1,b()}):$e(s.value).then(e=>{m.$modal.msgSuccess("新增成功"),v.value=!1,b()}))})}function $(u){const e=u.postId||F.value;m.$modal.confirm('是否确认删除岗位编号为"'+e+'"的数据项？').then(function(){return Le(e)}).then(()=>{b(),m.$modal.msgSuccess("删除成功")}).catch(()=>{})}function Z(){m.download("system/post/export",{...n.value},`post_${new Date().getTime()}.xlsx`)}return b(),(u,e)=>{const V=ve,f=Pe,ee=be,te=ye,i=Ve,B=De,S=Re,le=Ue,oe=Ie,y=xe,ae=he,se=Fe,ne=Ne,ue=Se,re=ke,pe=Ee,de=Ce,w=ce("hasPermi"),ie=we;return r(),R("div",Ke,[g(t(B,{model:o(n),ref:"queryRef",inline:!0},{default:a(()=>[t(f,{label:"岗位编码",prop:"postCode"},{default:a(()=>[t(V,{modelValue:o(n).postCode,"onUpdate:modelValue":e[0]||(e[0]=l=>o(n).postCode=l),placeholder:"请输入岗位编码",clearable:"",style:{width:"200px"},onKeyup:K(k,["enter"])},null,8,["modelValue"])]),_:1}),t(f,{label:"岗位名称",prop:"postName"},{default:a(()=>[t(V,{modelValue:o(n).postName,"onUpdate:modelValue":e[1]||(e[1]=l=>o(n).postName=l),placeholder:"请输入岗位名称",clearable:"",style:{width:"200px"},onKeyup:K(k,["enter"])},null,8,["modelValue"])]),_:1}),t(f,{label:"状态",prop:"statusFlag"},{default:a(()=>[t(te,{modelValue:o(n).statusFlag,"onUpdate:modelValue":e[2]||(e[2]=l=>o(n).statusFlag=l),placeholder:"岗位状态",clearable:"",style:{width:"200px"}},{default:a(()=>[(r(!0),R(Q,null,z(o(N),l=>(r(),c(ee,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,null,{default:a(()=>[t(i,{type:"primary",icon:"Search",onClick:k},{default:a(()=>e[12]||(e[12]=[p("搜索")])),_:1}),t(i,{icon:"Refresh",onClick:X},{default:a(()=>e[13]||(e[13]=[p("重置")])),_:1})]),_:1})]),_:1},8,["model"]),[[L,o(E)]]),t(oe,{gutter:10,class:"mb8"},{default:a(()=>[t(S,{span:1.5},{default:a(()=>[g((r(),c(i,{type:"primary",plain:"",icon:"Plus",onClick:H},{default:a(()=>e[14]||(e[14]=[p("新增")])),_:1})),[[w,["system:post:add"]]])]),_:1}),t(S,{span:1.5},{default:a(()=>[g((r(),c(i,{type:"success",plain:"",icon:"Edit",disabled:o(D),onClick:q},{default:a(()=>e[15]||(e[15]=[p("修改")])),_:1},8,["disabled"])),[[w,["system:post:edit"]]])]),_:1}),t(S,{span:1.5},{default:a(()=>[g((r(),c(i,{type:"danger",plain:"",icon:"Delete",disabled:o(T),onClick:$},{default:a(()=>e[16]||(e[16]=[p("删除")])),_:1},8,["disabled"])),[[w,["system:post:remove"]]])]),_:1}),t(S,{span:1.5},{default:a(()=>[g((r(),c(i,{type:"warning",plain:"",icon:"Download",onClick:Z},{default:a(()=>e[17]||(e[17]=[p("导出")])),_:1})),[[w,["system:post:export"]]])]),_:1}),t(le,{showSearch:o(E),"onUpdate:showSearch":e[3]||(e[3]=l=>A(E)?E.value=l:null),onQueryTable:b},null,8,["showSearch"])]),_:1}),g((r(),c(se,{data:o(P),onSelectionChange:j},{default:a(()=>[t(y,{type:"selection",width:"55",align:"left"}),t(y,{label:"岗位编号",align:"left",prop:"postId"}),t(y,{label:"岗位编码",align:"left",prop:"postCode"}),t(y,{label:"岗位名称",align:"left",prop:"postName"}),t(y,{label:"岗位排序",align:"left",prop:"postSort"}),t(y,{label:"状态",align:"left",prop:"statusFlag"},{default:a(l=>[t(ae,{options:o(N),value:l.row.statusFlag},null,8,["options","value"])]),_:1}),t(y,{label:"创建时间",align:"left",prop:"createTime",width:"180"},{default:a(l=>[G("span",null,J(u.parseTime(l.row.createTime)),1)]),_:1}),t(y,{label:"操作",width:"180",align:"left","class-name":"small-padding fixed-width"},{default:a(l=>[g((r(),c(i,{link:"",type:"primary",icon:"Edit",onClick:me=>q(l.row)},{default:a(()=>e[18]||(e[18]=[p("修改")])),_:2},1032,["onClick"])),[[w,["system:post:edit"]]]),g((r(),c(i,{link:"",type:"primary",icon:"Delete",onClick:me=>$(l.row)},{default:a(()=>e[19]||(e[19]=[p("删除")])),_:2},1032,["onClick"])),[[w,["system:post:remove"]]])]),_:1})]),_:1},8,["data"])),[[ie,o(x)]]),g(t(ne,{total:o(h),page:o(n).pageNum,"onUpdate:page":e[4]||(e[4]=l=>o(n).pageNum=l),limit:o(n).pageSize,"onUpdate:limit":e[5]||(e[5]=l=>o(n).pageSize=l),onPagination:b},null,8,["total","page","limit"]),[[L,o(h)>0]]),t(de,{title:o(I),modelValue:o(v),"onUpdate:modelValue":e[11]||(e[11]=l=>A(v)?v.value=l:null),width:"500px","append-to-body":""},{footer:a(()=>[G("div",Qe,[t(i,{type:"primary",onClick:Y},{default:a(()=>e[20]||(e[20]=[p("确 定")])),_:1}),t(i,{onClick:W},{default:a(()=>e[21]||(e[21]=[p("取 消")])),_:1})])]),default:a(()=>[t(B,{ref:"postRef",model:o(s),rules:o(O),"label-width":"80px"},{default:a(()=>[t(f,{label:"岗位名称",prop:"postName"},{default:a(()=>[t(V,{modelValue:o(s).postName,"onUpdate:modelValue":e[6]||(e[6]=l=>o(s).postName=l),placeholder:"请输入岗位名称"},null,8,["modelValue"])]),_:1}),t(f,{label:"岗位编码",prop:"postCode"},{default:a(()=>[t(V,{modelValue:o(s).postCode,"onUpdate:modelValue":e[7]||(e[7]=l=>o(s).postCode=l),placeholder:"请输入编码名称"},null,8,["modelValue"])]),_:1}),t(f,{label:"岗位顺序",prop:"postSort"},{default:a(()=>[t(ue,{modelValue:o(s).postSort,"onUpdate:modelValue":e[8]||(e[8]=l=>o(s).postSort=l),"controls-position":"right",min:0},null,8,["modelValue"])]),_:1}),t(f,{label:"岗位状态",prop:"statusFlag"},{default:a(()=>[t(pe,{modelValue:o(s).statusFlag,"onUpdate:modelValue":e[9]||(e[9]=l=>o(s).statusFlag=l)},{default:a(()=>[(r(!0),R(Q,null,z(o(N),l=>(r(),c(re,{key:l.value,value:l.value},{default:a(()=>[p(J(l.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(f,{label:"备注",prop:"remark"},{default:a(()=>[t(V,{modelValue:o(s).remark,"onUpdate:modelValue":e[10]||(e[10]=l=>o(s).remark=l),type:"textarea",placeholder:"请输入内容"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}};export{ot as default};
